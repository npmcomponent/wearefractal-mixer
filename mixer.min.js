!function(e){function t(){this._events={},this._conf&&n.call(this,this._conf)}function n(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function s(e){this._events={},this.newListener=!1,n.call(this,e)}function i(e,t,n,s){if(!n)return[];var r,o,l,h,a,c,f,u=[],p=t.length,_=t[s],v=t[s+1];if(s===p&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(r=0,o=n._listeners.length;o>r;r++)e&&e.push(n._listeners[r]);return[n]}if("*"===_||"**"===_||n[_]){if("*"===_){for(l in n)"_listeners"!==l&&n.hasOwnProperty(l)&&(u=u.concat(i(e,t,n[l],s+1)));return u}if("**"===_){f=s+1===p||s+2===p&&"*"===v,f&&n._listeners&&(u=u.concat(i(e,t,n,p)));for(l in n)"_listeners"!==l&&n.hasOwnProperty(l)&&("*"===l||"**"===l?(n[l]._listeners&&!f&&(u=u.concat(i(e,t,n[l],p))),u=u.concat(i(e,t,n[l],s))):u=l===v?u.concat(i(e,t,n[l],s+2)):u.concat(i(e,t,n[l],s)));return u}u=u.concat(i(e,t,n[_],s+1))}if(h=n["*"],h&&i(e,t,h,s+1),a=n["**"])if(p>s){a._listeners&&i(e,t,a,p);for(l in a)"_listeners"!==l&&a.hasOwnProperty(l)&&(l===v?i(e,t,a[l],s+2):l===_?i(e,t,a[l],s+1):(c={},c[l]=a[l],i(e,t,{"**":c},s+1)))}else a._listeners?i(e,t,a,p):a["*"]&&a["*"]._listeners&&i(e,t,a["*"],p);return u}function r(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,s=e.length;s>n+1;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,r=e.shift();r;){if(i[r]||(i[r]={}),i=i[r],0===e.length){if(i._listeners){if("function"==typeof i._listeners)i._listeners=[i._listeners,t];else if(o(i._listeners)&&(i._listeners.push(t),!i._listeners.warned)){var h=l;this._events.maxListeners!==undefined&&(h=this._events.maxListeners),h>0&&i._listeners.length>h&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}else i._listeners=t;return!0}r=e.shift()}return!0}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=10;s.prototype.delimiter=".",s.prototype.setMaxListeners=function(e){this._events||t.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},s.prototype.event="",s.prototype.once=function(e,t){return this.many(e,1,t),this},s.prototype.many=function(e,t,n){function s(){0===--t&&i.off(e,s),n.apply(this,arguments)}var i=this;if("function"!=typeof n)throw Error("many only accepts instances of Function");return s._origin=n,this.on(e,s),i},s.prototype.emit=function(){this._events||t.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var n=arguments.length,s=Array(n-1),r=1;n>r;r++)s[r-1]=arguments[r];for(r=0,n=this._all.length;n>r;r++)this.event=e,this._all[r].apply(this,s)}if("error"===e&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();i.call(this,o,l,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o){if(this.event=e,1===arguments.length)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var n=arguments.length,s=Array(n-1),r=1;n>r;r++)s[r-1]=arguments[r];o.apply(this,s)}return!0}if(o){for(var n=arguments.length,s=Array(n-1),r=1;n>r;r++)s[r-1]=arguments[r];for(var h=o.slice(),r=0,n=h.length;n>r;r++)this.event=e,h[r].apply(this,s);return h.length>0||this._all}return this._all},s.prototype.on=function(e,n){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof n)throw Error("on only accepts instances of Function");if(this._events||t.call(this),this.emit("newListener",e,n),this.wildcard)return r.call(this,e,n),this;if(this._events[e]){if("function"==typeof this._events[e])this._events[e]=[this._events[e],n];else if(o(this._events[e])&&(this._events[e].push(n),!this._events[e].warned)){var s=l;this._events.maxListeners!==undefined&&(s=this._events.maxListeners),s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}else this._events[e]=n;return this},s.prototype.onAny=function(e){if(this._all||(this._all=[]),"function"!=typeof e)throw Error("onAny only accepts instances of Function");return this._all.push(e),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(e,t){if("function"!=typeof t)throw Error("removeListener only takes instances of Function");var n,s=[];if(this.wildcard){var r="string"==typeof e?e.split(this.delimiter):e.slice();s=i.call(this,null,r,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],s.push({_listeners:n})}for(var l=0;s.length>l;l++){var h=s[l];if(n=h._listeners,o(n)){for(var a=-1,c=0,f=n.length;f>c;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){a=c;break}if(0>a)return this;this.wildcard?h._listeners.splice(a,1):this._events[e].splice(a,1),0===n.length&&(this.wildcard?delete h._listeners:delete this._events[e])}else(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete h._listeners:delete this._events[e])}return this},s.prototype.offAny=function(e){var t,n=0,s=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,s=t.length;s>n;n++)if(e===t[n])return t.splice(n,1),this}else this._all=[];return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||t.call(this),this;if(this.wildcard)for(var n="string"==typeof e?e.split(this.delimiter):e.slice(),s=i.call(this,null,n,this.listenerTree,0),r=0;s.length>r;r++){var o=s[r];o._listeners=null}else{if(!this._events[e])return this;this._events[e]=null}return this},s.prototype.listeners=function(e){if(this.wildcard){var n=[],s="string"==typeof e?e.split(this.delimiter):e.slice();return i.call(this,n,s,this.listenerTree,0),n}return this._events||t.call(this),this._events[e]||(this._events[e]=[]),o(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},s.prototype.listenersAny=function(){return this._all?this._all:[]},e.EventEmitter2=s}("undefined"!=typeof process&&process.title!==void 0&&"undefined"!=typeof exports?exports:window),function(){var e,t,n,s,i,r={}.hasOwnProperty,o=function(e,t){function n(){this.constructor=e}for(var s in t)r.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l=[].slice;e="undefined"!=typeof process&&null!==process&&"undefined"!=typeof exports&&null!==exports?require("../deps/EventEmitter2").EventEmitter2:window.EventEmitter2,s=function(e,t){var n,s;for(n in t)r.call(t,n)&&(s=t[n],e[n]=s);return e},n=function(e){function t(e){t.__super__.constructor.call(this),this._={props:{}},s(this,e)}return o(t,e),t.prototype.get=function(e){return this._.props[e]},t.prototype.getAll=function(){return this._.props},t.prototype.set=function(e,t,n){var s;if(null!=e){if("object"==typeof e){for(s in e)t=e[s],this.set(s,t);return this}if(null!=t)return this._.props[e]=t,n||(this.emit("change",e,t),this.emit("change:"+e,t)),this}},t.prototype.has=function(e){return null!=this._.props[e]},t.prototype.remove=function(e,t){return delete this._.props[e],t||(this.emit("change",e),this.emit("change:"+e),this.emit("remove",e),this.emit("remove:"+e)),this},t}(e),t=function(e){function t(e){t.__super__.constructor.call(this,e),this.onAny(function(){var e;return e=arguments.length>=1?l.call(arguments,0):[],i.emit.apply(i,[this.event,this].concat(l.call(e)))})}return o(t,e),t}(n),i=new n({Module:t,Emitter:e,module:function(){var e;return e=arguments.length>=1?l.call(arguments,0):[],{create:function(n){var s;return s=function(e,t,n){n.prototype=e.prototype;var s=new n,i=e.apply(s,t);return Object(i)===i?i:s}(t,e,function(){}),s.set(n),s},subclass:function(t){return i.module.apply(i,e.concat(t))}}},extend:s}),"undefined"!=typeof module&&null!==module?module.exports=i:window.mixer=i}.call(this);